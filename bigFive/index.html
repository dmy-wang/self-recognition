<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤§äº”äººæ ¼æµ‹è¯• | BFI-44</title>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-light: #8b5cf6;
            --primary-dark: #4f46e5;
            --secondary: #ede9fe;
            --accent: #06b6d4;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
            --text-light: #64748b;
            --text-muted: #94a3b8;
            --border: #e2e8f0;
            --border-light: #f1f5f9;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --gradient-primary: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #a855f7 100%);
            --gradient-accent: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 680px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 40px 20px;
            background: var(--gradient-primary);
            border-radius: 24px;
            color: white;
            margin-bottom: 30px;
            box-shadow: var(--shadow-lg);
        }

        .header h1 { font-size: 28px; font-weight: 600; margin-bottom: 8px; }
        .header p { font-size: 14px; opacity: 0.9; }

        .progress-container {
            background: var(--card);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-light);
        }

        .progress-bar {
            height: 12px;
            background: linear-gradient(90deg, var(--border-light) 0%, var(--border) 100%);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: 10px;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.4);
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transform: translateX(-100%);
            animation: shine 2s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 14px;
            font-size: 14px;
            color: var(--text-light);
            font-weight: 500;
        }

        .question-card {
            background: var(--card);
            border-radius: 24px;
            padding: 36px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
            margin-bottom: 24px;
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        .question-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary) 0%, var(--primary-light) 100%);
        }

        .question-number {
            display: inline-block;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            padding: 6px 16px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(255, 36, 66, 0.2);
        }

        .question-text {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 28px;
            line-height: 1.6;
            color: var(--text);
        }

        .question-prefix {
            color: var(--text-light);
            font-size: 15px;
            margin-bottom: 12px;
            font-weight: 500;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 14px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 18px 24px;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border: 2px solid var(--border);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--gradient-primary);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .option:hover {
            background: linear-gradient(135deg, var(--secondary) 0%, #f5f3ff 100%);
            border-color: var(--primary-light);
            transform: translateX(8px);
            box-shadow: 0 4px 20px rgba(99, 102, 241, 0.15);
        }

        .option:hover::before {
            transform: scaleY(1);
        }

        @media (hover: hover) and (pointer: fine) {
            .option:hover {
                background: linear-gradient(135deg, var(--secondary) 0%, #f5f3ff 100%);
                border-color: var(--primary-light);
                transform: translateX(8px);
                box-shadow: 0 4px 20px rgba(99, 102, 241, 0.15);
            }
            .option:hover::before {
                transform: scaleY(1);
            }
            .option:hover .option-radio {
                border-color: var(--primary-light);
                transform: scale(1.1);
            }
            .option:hover .option-text {
                color: var(--primary);
            }
        }

        .option.selected {
            background: linear-gradient(135deg, var(--secondary) 0%, #f5f3ff 100%);
            border-color: var(--primary);
            transform: translateX(4px);
            box-shadow: 0 6px 24px rgba(99, 102, 241, 0.25);
        }

        .option.selected::before {
            transform: scaleY(1);
        }

        .option-radio {
            width: 26px;
            height: 26px;
            border: 3px solid var(--border);
            border-radius: 50%;
            margin-right: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            background: white;
            flex-shrink: 0;
        }

        .option.selected .option-radio {
            border-color: var(--primary);
            background: var(--gradient-primary);
            transform: scale(1.1);
            box-shadow: 0 0 12px rgba(99, 102, 241, 0.4);
        }

        .option.selected .option-radio::after {
            content: '';
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
            animation: radioPop 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes radioPop {
            0% { transform: scale(0); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }

        .option-text {
            font-size: 16px;
            font-weight: 500;
            color: var(--text);
            transition: color 0.3s ease;
        }

        .nav-buttons {
            display: flex;
            gap: 16px;
            margin-top: 28px;
        }

        .btn {
            flex: 1;
            padding: 18px 28px;
            border: none;
            border-radius: 14px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            color: var(--text-light);
            border: 2px solid var(--border);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.08);
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.35);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.45);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn:disabled:hover {
            transform: none;
            box-shadow: none;
        }

        /* ç»“æœé¡µé¢æ ·å¼ - å‚è€ƒè®¾è®¡ */
        .results-header {
            text-align: center;
            padding: 40px 30px;
            background: var(--card);
            border-radius: 24px;
            box-shadow: var(--shadow-lg);
            margin-bottom: 24px;
            border: 1px solid var(--border-light);
        }

        .results-header h2 { 
            font-size: 28px; 
            margin-bottom: 12px; 
            color: var(--text);
            font-weight: 700;
        }
        .results-header p { 
            color: var(--text-light); 
            font-size: 16px; 
            margin-bottom: 8px;
        }
        .results-date { 
            font-size: 13px; 
            color: var(--text-muted); 
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border);
        }

        /* é›·è¾¾å›¾å’Œè¿›åº¦æ¡å®¹å™¨ */
        .results-overview {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        @media (max-width: 768px) {
            .results-overview {
                grid-template-columns: 1fr;
            }
        }

        /* é›·è¾¾å›¾å®¹å™¨ */
        .radar-container {
            background: var(--card);
            border-radius: 24px;
            padding: 30px;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-light);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #radarChart {
            width: 100%;
            max-width: 350px;
        }

        /* ç»´åº¦è¿›åº¦æ¡åˆ—è¡¨ */
        .dimensions-list {
            background: var(--card);
            border-radius: 24px;
            padding: 30px;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-light);
        }

        .dimension-progress-item {
            margin-bottom: 24px;
        }

        .dimension-progress-item:last-child {
            margin-bottom: 0;
        }

        .dimension-progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .dimension-progress-name {
            font-size: 15px;
            font-weight: 600;
            color: var(--text);
        }

        .dimension-progress-score {
            font-size: 14px;
            color: var(--text-muted);
            font-weight: 500;
        }

        .dimension-progress-bar {
            height: 10px;
            background: var(--border-light);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .dimension-progress-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* å„ç»´åº¦é¢œè‰² */
        .dimension-progress-fill.O { background: linear-gradient(90deg, #3b82f6, #60a5fa); }
        .dimension-progress-fill.C { background: linear-gradient(90deg, #10b981, #34d399); }
        .dimension-progress-fill.E { background: linear-gradient(90deg, #f59e0b, #fbbf24); }
        .dimension-progress-fill.A { background: linear-gradient(90deg, #ec4899, #f472b6); }
        .dimension-progress-fill.N { background: linear-gradient(90deg, #8b5cf6, #a78bfa); }

        /* æ™ºèƒ½åˆ†æéƒ¨åˆ† */
        .analysis-section-title {
            text-align: center;
            font-size: 14px;
            color: var(--text-muted);
            margin-bottom: 20px;
            position: relative;
        }

        .analysis-section-title::before,
        .analysis-section-title::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 100px;
            height: 1px;
            background: var(--border);
        }

        .analysis-section-title::before {
            left: 0;
        }

        .analysis-section-title::after {
            right: 0;
        }

        /* æ€§æ ¼æ€»ç»“å¡ç‰‡ */
        .summary-card-main {
            background: linear-gradient(135deg, #ede9fe 0%, #f5f3ff 100%);
            border-radius: 20px;
            padding: 28px;
            margin-bottom: 24px;
            border: 1px solid #ddd6fe;
        }

        .summary-card-main h3 {
            font-size: 18px;
            font-weight: 700;
            color: #5b21b6;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .summary-card-main p {
            font-size: 15px;
            color: #6d28d9;
            line-height: 1.8;
        }

        /* åˆ†æå¡ç‰‡ç½‘æ ¼ */
        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }

        @media (max-width: 600px) {
            .analysis-grid {
                grid-template-columns: 1fr;
            }
        }

        .analysis-card {
            border-radius: 20px;
            padding: 24px;
            border: 1px solid;
        }

        .analysis-card.green {
            background: linear-gradient(135deg, #ecfdf5 0%, #f0fdf4 100%);
            border-color: #a7f3d0;
        }

        .analysis-card.yellow {
            background: linear-gradient(135deg, #fffbeb 0%, #fefce8 100%);
            border-color: #fde68a;
        }

        .analysis-card.blue {
            background: linear-gradient(135deg, #eff6ff 0%, #f0f9ff 100%);
            border-color: #bfdbfe;
        }

        .analysis-card.pink {
            background: linear-gradient(135deg, #fdf2f8 0%, #fdf4ff 100%);
            border-color: #fbcfe8;
        }

        .analysis-card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 16px;
        }

        .analysis-card-icon {
            font-size: 20px;
        }

        .analysis-card-title {
            font-size: 16px;
            font-weight: 700;
        }

        .analysis-card.green .analysis-card-title { color: #047857; }
        .analysis-card.yellow .analysis-card-title { color: #b45309; }
        .analysis-card.blue .analysis-card-title { color: #1e40af; }
        .analysis-card.pink .analysis-card-title { color: #be185d; }

        .analysis-card-content {
            font-size: 14px;
            line-height: 1.7;
        }

        .analysis-card.green .analysis-card-content { color: #065f46; }
        .analysis-card.yellow .analysis-card-content { color: #92400e; }
        .analysis-card.blue .analysis-card-content { color: #1e3a8a; }
        .analysis-card.pink .analysis-card-content { color: #9d174d; }

        .analysis-card-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .analysis-card-list li {
            padding: 6px 0;
            padding-left: 16px;
            position: relative;
        }

        .analysis-card-list li::before {
            content: 'â€¢';
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        /* æ ‡ç­¾æ ·å¼ */
        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 12px;
        }

        .tag-item {
            padding: 8px 16px;
            background: white;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
            border: 1px solid #bfdbfe;
            color: #1e40af;
        }

        /* ç™¾åˆ†ä½å¾½ç« å’Œæ’å */
        .percentile-badge {
            display: inline-block;
            padding: 2px 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            margin-left: 6px;
        }

        .dimension-percentile {
            font-size: 12px;
            color: #6b7280;
            margin-top: 4px;
        }

        /* è¯¦ç»†ç»´åº¦å¡ç‰‡ */
        .dimension-card {
            background: var(--card);
            border-radius: 24px;
            padding: 28px;
            box-shadow: var(--shadow-lg);
            margin-bottom: 20px;
            border: 1px solid var(--border-light);
        }

        .dimension-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .dimension-icon {
            width: 52px;
            height: 52px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 26px;
            margin-right: 16px;
        }

        .dimension-icon.O { background: linear-gradient(135deg, #dbeafe, #bfdbfe); }
        .dimension-icon.C { background: linear-gradient(135deg, #d1fae5, #a7f3d0); }
        .dimension-icon.E { background: linear-gradient(135deg, #fef3c7, #fde68a); }
        .dimension-icon.A { background: linear-gradient(135deg, #fce7f3, #fbcfe8); }
        .dimension-icon.N { background: linear-gradient(135deg, #ede9fe, #ddd6fe); }

        .dimension-title h3 { font-size: 18px; margin-bottom: 4px; font-weight: 700; }
        .dimension-title span { font-size: 13px; color: var(--text-light); font-weight: 500; }

        .dimension-score { margin-left: auto; text-align: right; }
        .score-value { font-size: 32px; font-weight: 700; color: var(--primary); }
        .score-label { font-size: 13px; color: var(--text-muted); }

        .score-bar {
            height: 12px;
            background: var(--border-light);
            border-radius: 10px;
            margin-bottom: 16px;
            overflow: hidden;
        }

        .score-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .score-fill.O { background: linear-gradient(90deg, #3b82f6, #60a5fa); }
        .score-fill.C { background: linear-gradient(90deg, #10b981, #34d399); }
        .score-fill.E { background: linear-gradient(90deg, #f59e0b, #fbbf24); }
        .score-fill.A { background: linear-gradient(90deg, #ec4899, #f472b6); }
        .score-fill.N { background: linear-gradient(90deg, #8b5cf6, #a78bfa); }

        .dimension-level {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .level-high { background: #d1fae5; color: #065f46; }
        .level-medium { background: #fef3c7; color: #92400e; }
        .level-low { background: #fee2e2; color: #991b1b; }

        .dimension-desc {
            font-size: 15px;
            color: var(--text-light);
            line-height: 1.8;
            margin-bottom: 20px;
            padding: 16px;
            background: var(--bg);
            border-radius: 12px;
        }

        .analysis-detail-section {
            background: var(--bg);
            border-radius: 16px;
            padding: 20px;
            margin-top: 16px;
        }

        .analysis-detail-title {
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .analysis-detail-content {
            font-size: 14px;
            color: var(--text-light);
            line-height: 1.7;
        }

        /* å¢å¼ºç‰ˆåˆ†ææ ·å¼ */
        .famous-personality-card {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-radius: 16px;
            padding: 20px 24px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            gap: 16px;
            box-shadow: 0 4px 15px rgba(251, 191, 36, 0.2);
        }

        .famous-personality-icon {
            font-size: 32px;
        }

        .famous-personality-label {
            font-size: 13px;
            color: #92400e;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .famous-personality-name {
            font-size: 18px;
            font-weight: 700;
            color: #78350f;
        }

        .enhanced-analysis-section {
            margin-bottom: 24px;
        }

        .advice-card, .stress-card {
            background: var(--card);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 12px;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--primary);
        }

        .stress-card {
            border-left-color: #f59e0b;
        }

        .advice-dimension, .stress-dimension {
            font-size: 15px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .stress-dimension {
            color: #f59e0b;
        }

        .advice-content, .stress-content {
            font-size: 14px;
            color: var(--text-light);
            line-height: 1.7;
        }

        .learning-style-card {
            background: var(--card);
            border-radius: 16px;
            padding: 20px;
            box-shadow: var(--shadow);
        }

        .learning-style-item {
            padding: 12px 0;
            border-bottom: 1px solid var(--border-light);
            font-size: 14px;
            color: var(--text-light);
            line-height: 1.7;
        }

        .learning-style-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .learning-style-item:first-child {
            padding-top: 0;
        }

        .action-buttons {
            display: flex;
            gap: 16px;
            margin-top: 28px;
            margin-bottom: 40px;
        }

        .btn-outline {
            flex: 1;
            padding: 16px 24px;
            background: white;
            border: 2px solid var(--primary);
            color: var(--primary);
            border-radius: 12px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-outline:hover { background: var(--secondary); }

        .history-card {
            background: var(--card);
            border-radius: 20px;
            padding: 24px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        .history-card h3 {
            font-size: 16px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .history-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: var(--bg);
            border-radius: 10px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .history-item:hover { background: var(--secondary); }
        .history-item:last-child { margin-bottom: 0; }
        .history-date { font-size: 14px; font-weight: 500; }
        .history-preview { font-size: 12px; color: var(--text-light); margin-top: 2px; }
        .history-arrow { margin-left: auto; color: var(--text-light); }

        .welcome-card {
            background: var(--card);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .welcome-icon { font-size: 64px; margin-bottom: 20px; }
        .welcome-card h2 { font-size: 22px; margin-bottom: 12px; }
        .welcome-card p { color: var(--text-light); font-size: 14px; margin-bottom: 24px; line-height: 1.7; }

        .welcome-features {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 24px;
            text-align: left;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--bg);
            border-radius: 10px;
        }

        .feature-icon { font-size: 20px; }
        .feature-text { font-size: 14px; }

        @media (max-width: 480px) {
            .container { padding: 16px; }
            .header { padding: 30px 16px; margin: -16px -16px 20px -16px; }
            .header h1 { font-size: 24px; }
            .question-card { padding: 24px 20px; }
            .question-text { font-size: 16px; }
            .option { padding: 14px 16px; }
            .dimension-card { padding: 20px; }
            .score-value { font-size: 24px; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in { animation: fadeIn 0.3s ease; }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§  å¤§äº”äººæ ¼æµ‹è¯•</h1>
            <p>BFI-44 ç§‘å­¦äººæ ¼è¯„ä¼° Â· çº¦8åˆ†é’Ÿå®Œæˆ</p>
        </div>

        <div id="welcomeContainer">
            <div class="welcome-card">
                <div class="welcome-icon">ğŸ¯</div>
                <h2>æ¢ç´¢çœŸå®çš„è‡ªå·±</h2>
                <p>å¤§äº”äººæ ¼æ¨¡å‹æ˜¯å¿ƒç†å­¦ç•Œå…¬è®¤æœ€å¯é çš„äººæ ¼ç†è®ºï¼Œé€šè¿‡44é“é¢˜ç›®ï¼Œç§‘å­¦è¯„ä¼°ä½ çš„äº”ä¸ªæ ¸å¿ƒäººæ ¼ç»´åº¦ã€‚</p>
                
                <div class="welcome-features">
                    <div class="feature-item">
                        <span class="feature-icon">ğŸ“Š</span>
                        <span class="feature-text">äº”ç»´åº¦æ·±åº¦åˆ†ææŠ¥å‘Š</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">ğŸ’¼</span>
                        <span class="feature-text">èŒä¸šå‘å±•å»ºè®®</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">ğŸ’•</span>
                        <span class="feature-text">å©šæ‹å…³ç³»æ´å¯Ÿ</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">ğŸ“</span>
                        <span class="feature-text">ä¸ªäººæˆé•¿æŒ‡å—</span>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="startTest()" style="width: 100%;">å¼€å§‹æµ‹è¯•</button>
            </div>

            <div class="history-card" id="historyCard" style="display: none;">
                <h3>ğŸ“‹ å†å²è®°å½•</h3>
                <div id="historyList"></div>
            </div>
        </div>

        <div id="testContainer" style="display: none;">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <div class="progress-text">
                    <span id="progressText">ç¬¬ 1 é¢˜ / å…± 44 é¢˜</span>
                    <span id="progressPercent">0%</span>
                </div>
            </div>

            <div class="question-card fade-in" id="questionCard">
                <span class="question-number" id="questionNumber">Q1</span>
                <!-- <p class="question-prefix">æˆ‘è®¤ä¸ºè‡ªå·±æ˜¯ä¸€ä¸ª...</p> -->
                <p class="question-text" id="questionText"></p>
                
                <div class="options" id="optionsContainer">
                    <div class="option" data-value="1" onclick="selectOption(this)">
                        <div class="option-radio"></div>
                        <span class="option-text">éå¸¸ä¸åŒæ„</span>
                    </div>
                    <div class="option" data-value="2" onclick="selectOption(this)">
                        <div class="option-radio"></div>
                        <span class="option-text">æ¯”è¾ƒä¸åŒæ„</span>
                    </div>
                    <div class="option" data-value="3" onclick="selectOption(this)">
                        <div class="option-radio"></div>
                        <span class="option-text">ä¸­ç«‹</span>
                    </div>
                    <div class="option" data-value="4" onclick="selectOption(this)">
                        <div class="option-radio"></div>
                        <span class="option-text">æ¯”è¾ƒåŒæ„</span>
                    </div>
                    <div class="option" data-value="5" onclick="selectOption(this)">
                        <div class="option-radio"></div>
                        <span class="option-text">éå¸¸åŒæ„</span>
                    </div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" id="prevBtn" onclick="prevQuestion()" disabled>ä¸Šä¸€é¢˜</button>
                <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" disabled>ä¸‹ä¸€é¢˜</button>
            </div>
        </div>

        <div id="resultsContainer" style="display: none;"></div>
    </div>

    <!-- å¼•å…¥æ•°æ®æ–‡ä»¶ -->
    <script src="data.js"></script>

    <script>
        // ========== å¯†ç éªŒè¯ ==========
        const ACCESS_PASSWORD = "test2024";  // æ”¹æˆä½ æƒ³è¦çš„å¯†ç 

        (function() {
            const saved = localStorage.getItem('personality_test_access');
            if (saved === ACCESS_PASSWORD) return;
            
            const input = prompt('è¯·è¾“å…¥è®¿é—®å¯†ç ï¼š');
            if (input === ACCESS_PASSWORD) {
                localStorage.setItem('personality_test_access', input);
            } else {
                document.body.innerHTML = `
                    <div style="display:flex;justify-content:center;align-items:center;height:100vh;font-family:sans-serif;">
                        <div style="text-align:center;padding:40px;">
                            <h2 style="color:#333;">å¯†ç é”™è¯¯</h2>
                            <p style="color:#666;">è¯·è”ç³»å–å®¶è·å–æ­£ç¡®å¯†ç </p>
                            <button onclick="location.reload()" style="margin-top:20px;padding:10px 20px;cursor:pointer;">é‡æ–°è¾“å…¥</button>
                        </div>
                    </div>
                `;
                throw new Error('Access denied');
            }
        })();
        // ========== å¯†ç éªŒè¯ç»“æŸ ==========

        // ä½¿ç”¨ data.js ä¸­çš„æ•°æ®
        const questions = QUESTIONS;
        const dimensionInfo = DIMENSION_INFO;

        let currentQuestion = 0;
        let answers = {};

        function init() {
            loadHistory();
            document.getElementById('welcomeContainer').style.display = 'block';
        }

        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('bfi44_history') || '[]');
            const historyCard = document.getElementById('historyCard');
            const historyList = document.getElementById('historyList');
            
            if (history.length > 0) {
                historyCard.style.display = 'block';
                historyList.innerHTML = history.slice(0, 5).map((item, index) => `
                    <div class="history-item" onclick="viewHistory(${index})">
                        <div>
                            <div class="history-date">${item.date}</div>
                            <div class="history-preview">E:${item.scores.E} A:${item.scores.A} C:${item.scores.C} N:${item.scores.N} O:${item.scores.O}</div>
                        </div>
                        <span class="history-arrow">â†’</span>
                    </div>
                `).join('');
            }
        }

        function viewHistory(index) {
            const history = JSON.parse(localStorage.getItem('bfi44_history') || '[]');
            if (history[index]) {
                showResults(history[index].scores, history[index].date);
            }
        }

        function startTest() {
            document.getElementById('welcomeContainer').style.display = 'none';
            document.getElementById('testContainer').style.display = 'block';
            currentQuestion = 0;
            answers = {};
            renderQuestion();
        }

        function renderQuestion() {
            const q = questions[currentQuestion];
            document.getElementById('questionNumber').textContent = `Q${currentQuestion + 1}`;
            document.getElementById('questionText').textContent = q.text;
            
            // Update progress
            const progress = ((currentQuestion) / questions.length) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
            document.getElementById('progressText').textContent = `ç¬¬ ${currentQuestion + 1} é¢˜ / å…± ${questions.length} é¢˜`;
            document.getElementById('progressPercent').textContent = `${Math.round(progress)}%`;
            
            // Reset options
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Restore previous answer if exists
            if (answers[currentQuestion] !== undefined) {
                const selectedOption = document.querySelector(`.option[data-value="${answers[currentQuestion]}"]`);
                if (selectedOption) {
                    selectedOption.classList.add('selected');
                }
                document.getElementById('nextBtn').disabled = false;
            } else {
                document.getElementById('nextBtn').disabled = true;
            }
            
            // Update prev button
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            
            // Update next button text
            document.getElementById('nextBtn').textContent = currentQuestion === questions.length - 1 ? 'æŸ¥çœ‹ç»“æœ' : 'ä¸‹ä¸€é¢˜';
        }

        function selectOption(element) {
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            answers[currentQuestion] = parseInt(element.dataset.value);
            document.getElementById('nextBtn').disabled = false;
            
            if (currentQuestion < questions.length - 1) {
                setTimeout(function() {
                    nextQuestion();
                }, 300);
            } else {
                setTimeout(function() {
                    calculateAndShowResults();
                }, 300);
            }
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                renderQuestion();
                document.getElementById('questionCard').classList.remove('fade-in');
                void document.getElementById('questionCard').offsetWidth;
                document.getElementById('questionCard').classList.add('fade-in');
            } else {
                calculateAndShowResults();
            }
        }

        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                renderQuestion();
            }
        }

        function calculateAndShowResults() {
            const scores = { O: 0, C: 0, E: 0, A: 0, N: 0 };
            const counts = { O: 0, C: 0, E: 0, A: 0, N: 0 };
            
            questions.forEach((q, index) => {
                if (answers[index] !== undefined) {
                    let score = answers[index];
                    if (q.reverse) {
                        score = 6 - score;
                    }
                    scores[q.dimension] += score;
                    counts[q.dimension]++;
                }
            });
            
            // Calculate percentages (1-5 scale to 0-100)
            Object.keys(scores).forEach(dim => {
                const maxScore = counts[dim] * 5;
                const minScore = counts[dim] * 1;
                scores[dim] = Math.round(((scores[dim] - minScore) / (maxScore - minScore)) * 100);
            });
            
            // Save to history
            const date = new Date().toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            const history = JSON.parse(localStorage.getItem('bfi44_history') || '[]');
            history.unshift({ date, scores, answers: {...answers} });
            if (history.length > 10) history.pop();
            localStorage.setItem('bfi44_history', JSON.stringify(history));
            
            showResults(scores, date);
        }

        // è¾…åŠ©å‡½æ•°ï¼ˆdata.js ä¸­å·²å®šä¹‰ï¼Œè¿™é‡Œä¿ç•™ä½œä¸ºåå¤‡ï¼‰
        function getLevel(score) {
            if (score >= 70) return { text: 'å¾ˆé«˜', class: 'level-very-high' };
            if (score >= 60) return { text: 'åé«˜', class: 'level-high' };
            if (score >= 40) return { text: 'ä¸­ç­‰', class: 'level-medium' };
            if (score >= 30) return { text: 'åä½', class: 'level-low' };
            return { text: 'å¾ˆä½', class: 'level-very-low' };
        }

        function getDescription(dim, score) {
            const info = dimensionInfo[dim];
            if (info.descriptions) {
                if (score >= 60) return info.descriptions.high;
                if (score >= 40) return info.descriptions.medium;
                return info.descriptions.low;
            }
            if (score >= 60) return info.high;
            if (score >= 40) return info.medium;
            return info.low;
        }

        function getCareer(dim, score) {
            const info = dimensionInfo[dim];
            if (info.career) {
                if (score >= 60) return info.career.high;
                if (score >= 40) return info.career.medium;
                return info.career.low;
            }
            return '';
        }

        function getLove(dim, score) {
            const info = dimensionInfo[dim];
            if (info.love) {
                if (score >= 60) return info.love.high;
                if (score >= 40) return info.love.medium;
                return info.love.low;
            }
            return '';
        }
        let _currentScores = null;
        let _currentDate = null;
        function showResults(scores, date) {
            _currentScores = scores;
            _currentDate = date;
            document.getElementById('testContainer').style.display = 'none';
            document.getElementById('welcomeContainer').style.display = 'none';
            document.getElementById('resultsContainer').style.display = 'block';
            
            const dims = ['E', 'A', 'C', 'N', 'O'];
            const dimNames = { O: 'å¼€æ”¾æ€§ (Openness)', C: 'å°½è´£æ€§ (Conscientiousness)', E: 'å¤–å‘æ€§ (Extraversion)', A: 'å®œäººæ€§ (Agreeableness)', N: 'ç¥ç»è´¨ (Neuroticism)' };
            const sortedDims = [...dims].sort((a, b) => scores[b] - scores[a]);
            const highest = sortedDims[0];
            const lowest = sortedDims[sortedDims.length - 1];
            
            // ç”Ÿæˆé›·è¾¾å›¾SVG
            const radarSvg = generateRadarChart(scores);
            
            let html = `
                <div class="results-header fade-in">
                    <h2>ğŸ‰ æµ‹è¯•å®Œæˆï¼</h2>
                    <p>ä»¥ä¸‹æ˜¯ä½ çš„å¤§äº”äººæ ¼åˆ†ææŠ¥å‘Š</p>
                    <div class="results-date">æµ‹è¯•æ—¶é—´ï¼š${date}</div>
                </div>
                
                <!-- é›·è¾¾å›¾å’Œè¿›åº¦æ¡æ¦‚è§ˆ -->
                <div class="results-overview fade-in">
                    <div class="radar-container">
                        ${radarSvg}
                    </div>
                    <div class="dimensions-list">
                        ${dims.map(dim => {
                            const percentile = getPercentile(scores[dim], dim);
                            const percentileDesc = getPercentileDescription(percentile);
                            return `
                            <div class="dimension-progress-item">
                                <div class="dimension-progress-header">
                                    <span class="dimension-progress-name">${dimNames[dim]}</span>
                                    <span class="dimension-progress-score">${scores[dim]} åˆ† <span class="percentile-badge">å‰${100 - percentile}%</span></span>
                                </div>
                                <div class="dimension-progress-bar">
                                    <div class="dimension-progress-fill ${dim}" style="width: ${scores[dim]}%"></div>
                                </div>
                                <div class="dimension-percentile">äººç¾¤æ’åï¼š${percentileDesc}</div>
                            </div>
                        `}).join('')}
                    </div>
                </div>
                
                <!-- æ™ºèƒ½åˆ†æ -->
                <div class="analysis-section-title">æ™ºèƒ½åˆ†æ</div>
                
                <!-- æ€§æ ¼æ€»ç»“ -->
                <div class="summary-card-main fade-in">
                    <h3>ğŸ“‹ æ€§æ ¼æ€»ç»“</h3>
                    <p>${generateSummary(scores, highest, lowest)}</p>
                </div>
                
                <!-- åäººå‚è€ƒ -->
                ${getFamousPersonalityHTML(scores)}
                
                <!-- åˆ†æå¡ç‰‡ç½‘æ ¼ -->
                <div class="analysis-grid fade-in">
                    <div class="analysis-card green">
                        <div class="analysis-card-header">
                            <span class="analysis-card-icon">ğŸ›¡ï¸</span>
                            <span class="analysis-card-title">æ ¸å¿ƒä¼˜åŠ¿</span>
                        </div>
                        <div class="analysis-card-content">
                            <ul class="analysis-card-list">
                                ${generateStrengths(scores, highest)}
                            </ul>
                        </div>
                    </div>
                    <div class="analysis-card yellow">
                        <div class="analysis-card-header">
                            <span class="analysis-card-icon">âš ï¸</span>
                            <span class="analysis-card-title">æ½œåœ¨ç›²ç‚¹</span>
                        </div>
                        <div class="analysis-card-content">
                            <ul class="analysis-card-list">
                                ${generateWeaknesses(scores, lowest)}
                            </ul>
                        </div>
                    </div>
                    <div class="analysis-card blue">
                        <div class="analysis-card-header">
                            <span class="analysis-card-icon">ğŸ’¼</span>
                            <span class="analysis-card-title">é€‚åˆèŒä¸š</span>
                        </div>
                        <div class="analysis-card-content">
                            <div class="tags-container">
                                ${(() => {
                                    const career = getCareer(highest, scores[highest]);
                                    if (!career) return '<span class="tag-item">æš‚æ— å»ºè®®</span>';
                                    return career.split('ã€').slice(0, 5).map(c => `<span class="tag-item">${c}</span>`).join('');
                                })()}
                            </div>
                        </div>
                    </div>
                    <div class="analysis-card pink">
                        <div class="analysis-card-header">
                            <span class="analysis-card-icon">ğŸ’•</span>
                            <span class="analysis-card-title">æƒ…æ„Ÿå»ºè®®</span>
                        </div>
                        <div class="analysis-card-content">
                            ${getLove(highest, scores[highest])}
                        </div>
                    </div>
                </div>
                
                <div id="captureEnd"></div>
            `;
            
            // è¯¦ç»†ç»´åº¦åˆ†æ
            dims.forEach(dim => {
                const info = dimensionInfo[dim];
                const score = scores[dim];
                const level = getLevel(score);
                
                html += `
                    <div class="dimension-card fade-in">
                        <div class="dimension-header">
                            <div class="dimension-icon ${dim}">${info.icon}</div>
                            <div class="dimension-title">
                                <h3>${info.name}</h3>
                                <span>${info.english}</span>
                            </div>
                            <div class="dimension-score">
                                <div class="score-value">${score}</div>
                                <div class="score-label">/ 100</div>
                            </div>
                        </div>
                        
                        <div class="score-bar">
                            <div class="score-fill ${dim}" style="width: ${score}%"></div>
                        </div>
                        
                        <span class="dimension-level ${level.class}">${level.text}</span>
                        
                        <p class="dimension-desc">${getDescription(dim, score)}</p>
                        
                        <div class="analysis-detail-section">
                            <div class="analysis-detail-title">ğŸ’¼ èŒä¸šå»ºè®®</div>
                            <div class="analysis-detail-content">${getCareer(dim, score)}</div>
                        </div>
                        
                        <div class="analysis-detail-section">
                            <div class="analysis-detail-title">ğŸ’• å©šæ‹æ´å¯Ÿ</div>
                            <div class="analysis-detail-content">${getLove(dim, score)}</div>
                        </div>
                    </div>
                `;
            });
            
            // å¢å¼ºç‰ˆåˆ†æå†…å®¹
            html += generateEnhancedAnalysis(scores);
            
            html += `
                <div class="action-buttons">
                    <button class="btn-outline" onclick="retakeTest()">é‡æ–°æµ‹è¯•</button>
                    <button class="btn-outline" onclick="shareResults()">ä¿å­˜å›¾ç‰‡</button>
                </div>
            `;
            
            document.getElementById('resultsContainer').innerHTML = html;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // ç”Ÿæˆå¢å¼ºç‰ˆåˆ†æå†…å®¹
        function generateEnhancedAnalysis(scores) {
            const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
            const topDims = sorted.slice(0, 2).map(e => e[0]);
            const bottomDims = sorted.slice(-2).map(e => e[0]);
            
            let html = '';
            
            // äººç”Ÿå»ºè®®
            const lifeAdvice = [];
            topDims.forEach(dim => {
                const score = scores[dim];
                const level = score >= 60 ? 'high' : 'low';
                if (ANALYSIS_CONTENT.lifeAdvice[dim] && ANALYSIS_CONTENT.lifeAdvice[dim][level]) {
                    lifeAdvice.push({
                        dim: DIMENSION_INFO[dim].name,
                        content: ANALYSIS_CONTENT.lifeAdvice[dim][level]
                    });
                }
            });
            
            if (lifeAdvice.length > 0) {
                html += `
                    <div class="analysis-section-title">ğŸ’¡ äººç”Ÿå»ºè®®</div>
                    <div class="enhanced-analysis-section fade-in">
                        ${lifeAdvice.map(advice => `
                            <div class="advice-card">
                                <div class="advice-dimension">${advice.dim}</div>
                                <div class="advice-content">${advice.content}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            // å­¦ä¹ é£æ ¼
            const learningStyles = [];
            Object.keys(scores).forEach(dim => {
                const score = scores[dim];
                if (score >= 60 || score <= 40) {
                    const level = score >= 60 ? 'high' : 'low';
                    if (ANALYSIS_CONTENT.learningStyle[dim] && ANALYSIS_CONTENT.learningStyle[dim][level]) {
                        learningStyles.push(ANALYSIS_CONTENT.learningStyle[dim][level]);
                    }
                }
            });
            
            if (learningStyles.length > 0) {
                html += `
                    <div class="analysis-section-title">ğŸ“š å­¦ä¹ é£æ ¼</div>
                    <div class="enhanced-analysis-section fade-in">
                        <div class="learning-style-card">
                            ${learningStyles.slice(0, 3).map(style => `
                                <div class="learning-style-item">${style}</div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            // å‹åŠ›åº”å¯¹
            const stressAdvice = [];
            Object.keys(scores).forEach(dim => {
                const score = scores[dim];
                if (score >= 65 || score <= 35) {
                    const level = score >= 65 ? 'high' : 'low';
                    if (ANALYSIS_CONTENT.stressResponse[dim] && ANALYSIS_CONTENT.stressResponse[dim][level]) {
                        stressAdvice.push({
                            dim: DIMENSION_INFO[dim].name,
                            content: ANALYSIS_CONTENT.stressResponse[dim][level]
                        });
                    }
                }
            });
            
            if (stressAdvice.length > 0) {
                html += `
                    <div class="analysis-section-title">ğŸ§˜ å‹åŠ›åº”å¯¹</div>
                    <div class="enhanced-analysis-section fade-in">
                        ${stressAdvice.map(advice => `
                            <div class="stress-card">
                                <div class="stress-dimension">${advice.dim}</div>
                                <div class="stress-content">${advice.content}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            return html;
        }
        
        // ç”Ÿæˆåäººå‚è€ƒHTML
        function getFamousPersonalityHTML(scores) {
            const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
            const top1 = sorted[0][0];
            const top2 = sorted[1][0];
            const score1 = scores[top1];
            const score2 = scores[top2];
            
            // æ„å»ºå¯èƒ½çš„é”®
            const possibleKeys = [
                `${top1}_high_${top2}_high`,
                `${top2}_high_${top1}_high`,
                `${top1}_high_${top2}_low`,
                `${top1}_low_${top2}_high`
            ];
            
            let personality = null;
            for (const key of possibleKeys) {
                if (ANALYSIS_CONTENT.famousPersonalities[key]) {
                    personality = ANALYSIS_CONTENT.famousPersonalities[key];
                    break;
                }
            }
            
            if (!personality) return '';
            
            return `
                <div class="famous-personality-card fade-in">
                    <div class="famous-personality-icon">â­</div>
                    <div class="famous-personality-content">
                        <div class="famous-personality-label">ä½ çš„æ€§æ ¼ç±»å‹</div>
                        <div class="famous-personality-name">${personality}</div>
                    </div>
                </div>
            `;
        }
        
        // ç”Ÿæˆé›·è¾¾å›¾SVG
        function generateRadarChart(scores) {
            const dims = ['O', 'C', 'E', 'A', 'N'];
            const labels = ['å¼€æ”¾æ€§', 'å°½è´£æ€§', 'å¤–å‘æ€§', 'å®œäººæ€§', 'ç¥ç»è´¨'];
            const colors = ['#3b82f6', '#10b981', '#f59e0b', '#ec4899', '#8b5cf6'];
            const size = 300;
            const center = size / 2;
            const radius = 100;
            
            let points = '';
            const angleStep = (Math.PI * 2) / 5;
            
            dims.forEach((dim, i) => {
                const angle = i * angleStep - Math.PI / 2;
                const value = scores[dim] / 100;
                const x = center + radius * value * Math.cos(angle);
                const y = center + radius * value * Math.sin(angle);
                points += `${x},${y} `;
            });
            
            // ç”Ÿæˆç½‘æ ¼çº¿
            let gridLines = '';
            for (let i = 1; i <= 4; i++) {
                const r = (radius / 4) * i;
                let gridPoints = '';
                for (let j = 0; j < 5; j++) {
                    const angle = j * angleStep - Math.PI / 2;
                    const x = center + r * Math.cos(angle);
                    const y = center + r * Math.sin(angle);
                    gridPoints += `${x},${y} `;
                }
                gridLines += `<polygon points="${gridPoints}" fill="none" stroke="#e2e8f0" stroke-width="1"/>`;
            }
            
            // ç”Ÿæˆè½´çº¿
            let axes = '';
            for (let i = 0; i < 5; i++) {
                const angle = i * angleStep - Math.PI / 2;
                const x = center + radius * Math.cos(angle);
                const y = center + radius * Math.sin(angle);
                axes += `<line x1="${center}" y1="${center}" x2="${x}" y2="${y}" stroke="#e2e8f0" stroke-width="1"/>`;
            }
            
            // ç”Ÿæˆæ ‡ç­¾
            let labelElements = '';
            dims.forEach((dim, i) => {
                const angle = i * angleStep - Math.PI / 2;
                const x = center + (radius + 25) * Math.cos(angle);
                const y = center + (radius + 25) * Math.sin(angle);
                labelElements += `<text x="${x}" y="${y}" text-anchor="middle" dominant-baseline="middle" font-size="11" fill="#64748b" font-weight="500">${labels[i]}</text>`;
            });
            
            return `
                <svg id="radarChart" viewBox="0 0 ${size} ${size}">
                    ${gridLines}
                    ${axes}
                    <polygon points="${points}" fill="rgba(99, 102, 241, 0.2)" stroke="#6366f1" stroke-width="2"/>
                    ${labelElements}
                </svg>
            `;
        }
        
        // ç”Ÿæˆæ€§æ ¼æ€»ç»“
        function generateSummary(scores, highest, lowest) {
            const highDesc = dimensionInfo[highest];
            const lowDesc = dimensionInfo[lowest];
            const highText = highDesc.descriptions ? highDesc.descriptions.high : highDesc.high;
            return `ä½ åœ¨<strong>${highDesc.name}</strong>æ–¹é¢è¡¨ç°çªå‡ºï¼Œ${highText}è€Œåœ¨<strong>${lowDesc.name}</strong>æ–¹é¢ç›¸å¯¹è¾ƒä½ã€‚æ•´ä½“è€Œè¨€ï¼Œä½ æ˜¯ä¸€ä¸ªå…·æœ‰ç‹¬ç‰¹ä¸ªæ€§çš„äººï¼Œåœ¨ç”Ÿæ´»å’Œå·¥ä½œä¸­èƒ½å¤Ÿå‘æŒ¥è‡ªèº«ä¼˜åŠ¿ï¼ŒåŒæ—¶ä¹Ÿæœ‰æˆé•¿ç©ºé—´ã€‚`;
        }
        
        // ç”Ÿæˆæ ¸å¿ƒä¼˜åŠ¿
        function generateStrengths(scores, highest) {
            const strengths = [];
            const resultStrengths = ANALYSIS_CONTENT.resultStrengths;
            
            if (scores['O'] >= 60 && resultStrengths.O) strengths.push(resultStrengths.O);
            if (scores['C'] >= 60 && resultStrengths.C) strengths.push(resultStrengths.C);
            if (scores['E'] >= 60 && resultStrengths.E) strengths.push(resultStrengths.E);
            if (scores['A'] >= 60 && resultStrengths.A) strengths.push(resultStrengths.A);
            if (scores['N'] <= 40 && resultStrengths.N_low) strengths.push(resultStrengths.N_low);
            
            if (strengths.length === 0 && ANALYSIS_CONTENT.defaultStrengths) {
                strengths.push(...ANALYSIS_CONTENT.defaultStrengths);
            }
            
            return strengths.slice(0, 3).map(s => `<li>${s}</li>`).join('');
        }
        
        // ç”Ÿæˆæ½œåœ¨ç›²ç‚¹
        function generateWeaknesses(scores, lowest) {
            const weaknesses = [];
            const resultWeaknesses = ANALYSIS_CONTENT.resultWeaknesses;
            
            if (scores['O'] <= 40 && resultWeaknesses.O) weaknesses.push(resultWeaknesses.O);
            if (scores['C'] <= 40 && resultWeaknesses.C) weaknesses.push(resultWeaknesses.C);
            if (scores['E'] <= 40 && resultWeaknesses.E) weaknesses.push(resultWeaknesses.E);
            if (scores['A'] <= 40 && resultWeaknesses.A) weaknesses.push(resultWeaknesses.A);
            if (scores['N'] >= 60 && resultWeaknesses.N) weaknesses.push(resultWeaknesses.N);
            
            if (weaknesses.length === 0 && ANALYSIS_CONTENT.defaultWeaknesses) {
                weaknesses.push(...ANALYSIS_CONTENT.defaultWeaknesses);
            }
            
            return weaknesses.slice(0, 3).map(w => `<li>${w}</li>`).join('');
        }

        function shareResults() {
            const resultsContainer = document.getElementById('resultsContainer');
            const captureEnd = document.getElementById('captureEnd');
            const buttons = resultsContainer.querySelector('.action-buttons');
            if (buttons) buttons.style.display = 'none';
            
            const captureDiv = document.createElement('div');
            captureDiv.id = 'captureArea';
            captureDiv.style.cssText = 'background: #ffffff; padding: 20px;';
            
            const children = [];
            let foundEnd = false;
            resultsContainer.childNodes.forEach(child => {
                if (child.id === 'captureEnd') {
                    foundEnd = true;
                }
                if (!foundEnd && child.nodeType === 1) {
                    children.push(child.cloneNode(true));
                }
            });
            children.forEach(child => captureDiv.appendChild(child));
            resultsContainer.insertBefore(captureDiv, resultsContainer.firstChild);
            
            html2canvas(captureDiv, {
                scale: 1.5,
                useCORS: true,
                backgroundColor: '#ffffff',
                scrollX: 0,
                scrollY: 0,
                logging: false,
                onclone: function(clonedDoc) {
                    const clonedCapture = clonedDoc.getElementById('captureArea');
                    if (clonedCapture) {
                        clonedCapture.style.background = '#ffffff';
                        const textElements = clonedCapture.querySelectorAll('.dimension-desc, .analysis-detail-content, .advice-content, .summary-card-main p, .analysis-card-content, .dimension-percentile');
                        textElements.forEach(el => {
                            el.style.color = '#1e293b';
                        });
                    }
                }
            }).then(canvas => {
                resultsContainer.removeChild(captureDiv);
                if (buttons) buttons.style.display = 'flex';
                
                const link = document.createElement('a');
                link.download = 'å¤§äº”äººæ ¼æµ‹è¯•ç»“æœ_' + new Date().toLocaleDateString('zh-CN').replace(/\//g, '-') + '.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            }).catch(err => {
                if (captureDiv.parentNode) resultsContainer.removeChild(captureDiv);
                if (buttons) buttons.style.display = 'flex';
                alert('ä¿å­˜å›¾ç‰‡å¤±è´¥ï¼Œè¯·å°è¯•æˆªå›¾ä¿å­˜');
                console.error(err);
            });
        }

        function retakeTest() {
            document.getElementById('resultsContainer').style.display = 'none';
            document.getElementById('welcomeContainer').style.display = 'block';
            loadHistory();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialize
        init();
    </script>
</body>
</html>